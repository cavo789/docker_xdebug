<?xml version="1.1" encoding="UTF-8"?>
<gitlab-ci>
    <run-ci>
        <run-task name="php-cs-fixer" enabled="1" stage="quality" bin="/usr/local/bin/php-cs-fixer.phar" config=".config/.php-cs-fixer.php" commandLine="$bin fix --config=$config --verbose --using-cache=no --diff" description="Automatically fix PHP Coding Standards issues" dockerServiceName="appfdm" />
        <run-task name="composer-bosa-lib" enabled="1" description="Update the bosa/bosa library dependency, use bosa/bosa:dev-dev on branch dev and bosa/bosa:dev-master on branch master" dockerServiceName="appfdm" />
        <run-task name="composer-update" enabled="1" bin="composer" config="" commandLine="$bin update" description="Update dependencies" dockerServiceName="appfdm" />
        <run-task name="phan" enabled="1" stage="quality" bin="/usr/local/bin/phan.phar" config=".config/phan.php" commandLine="$bin --progress-bar --config-file $config -o $output" description="Phan is a static analyzer for PHP" dockerServiceName="appfdm" />
        <run-task name="markdownlint" enabled="1" stage="quality" bin="markdownlint" config=".config/.markdownlint.json" commandLine="$bin --config $config --output $output --ignore node_modules --ignore vendor ." description="Validate syntax of .md files" npm="markdownlint-cli" dockerServiceName="appfdm" />
        <run-task name="wikiphpdoc" enabled="1" stage="documentation" bin="/usr/local/bin/wikiphpdoc.phar" config=".config/wiki-phpdoc-generator.xml" commandLine="$bin $config" description="Generate the WikiPhpDoc of the project" dockerServiceName="appfdm" />
        <run-task name="phpunit:static_db" enabled="1" stage="tests" bin="composer" commandLine="$bin run-script phpunit-static-db" description="Run PHP Unit - Static DB tests - These tests should be rewritten to not depend on the actual content of the db" dockerServiceName="appfdm" comment="!!!IT SEEMS THERE IS A BUG WITH THE PHPUNIT.PHAR FILE, THE COVERAGE FILE GENERATED BY PHPUNIT.PHAR CAN'T BE USED WITH PHPCOV.PHAR. THE PHPCOV.PHAR BINARY WILL REPORT A FAIL TO MERGE ERROR. DON'T USE PHAR BUT USE VENDOR WILL SOLVE THAT PROBLEM!!!" />
        <run-task name="phpunit:dynamic_db" enabled="1" stage="tests" bin="composer" commandLine="$bin run-script phpunit-dynamic-db" doItYourself="./install/run_CI.sh phpunit" description="Run PHP Unit - Dynamic DB tests" dockerServiceName="appfdm" comment="!!!IT SEEMS THERE IS A BUG WITH THE PHPUNIT.PHAR FILE, THE COVERAGE FILE GENERATED BY PHPUNIT.PHAR CAN'T BE USED WITH PHPCOV.PHAR. THE PHPCOV.PHAR BINARY WILL REPORT A FAIL TO MERGE ERROR. DON'T USE PHAR BUT USE VENDOR WILL SOLVE THAT PROBLEM!!!" />
        <run-task name="phpcov" enabled="1" stage="tests" bin="vendor/bin/phpcov" commandLine="$bin merge .output/coverage --html=.output/coverage" description="Run the PHP coverage report" dockerServiceName="appfdm" comment="!!!IT SEEMS THERE IS A BUG WITH THE PHPUNIT.PHAR FILE, THE COVERAGE FILE GENERATED BY PHPUNIT.PHAR CAN'T BE USED WITH PHPCOV.PHAR. THE PHPCOV.PHAR BINARY WILL REPORT A FAIL TO MERGE ERROR. DON'T USE PHAR BUT USE VENDOR WILL SOLVE THAT PROBLEM!!!" />
        <run-task name="dusk" enabled="1" stage="tests" bin="composer" commandLine="$bin run-script dusk" description="Run Dusk tests" dockerServiceName="appfdm" />
    </run-ci>
</gitlab-ci>
